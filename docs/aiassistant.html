<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IG Wizard | AI Assistant</title> 
    <link rel="icon" type="image/x-icon" href="./images/logo.png">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="output.css">
</head>
<body class="text-white">
    <!-- Navbar -->
    <nav class="bg-black bg-opacity-50 backdrop-filter backdrop-blur-lg shadow-lg fixed w-full z-50">
        <div class="container mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <!-- Logo and Title -->
                <a href="index.html" class="flex items-center space-x-3">
                    <img src="./images/logo.png" alt="IG Wizard Logo" class="h-8 w-8">
                    <span class="text-lg font-semibold">IG Wizard</span>
                </a>

                <!-- Mobile menu button -->
                <button id="mobile-menu-button" class="md:hidden text-white hover:text-blue-400">
                    <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>

                <!-- Navigation Links with dropdown menu -->
                <div id="nav-links" class="hidden md:flex md:space-x-4">
                    <a href="aiassistant.html" class="nav-link hover:text-blue-400">AI Tutor</a>
                    
                    <!-- Past Papers dropdown - Improved version -->
                    <div class="relative group">
                        <button class="nav-link hover:text-blue-400 flex items-center" aria-label="Menu"> 
                            Past Papers
                            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <!-- Add padding-top to create an invisible bridge between button and dropdown -->
                        <div class="absolute left-0 hidden group-hover:block pt-2 z-50">
                            <div class="bg-black bg-opacity-80 backdrop-blur-lg p-2 rounded shadow-lg w-40">
                                <a href="igcse.html" class="block py-2 px-3 hover:bg-blue-900 hover:text-blue-400 rounded">IGCSE</a>
                                <a href="comingsoon.html" class="block py-2 px-3 hover:bg-blue-900 hover:text-blue-400 rounded">IAL</a>
                            </div>
                        </div>
                    </div>
                    
                    <a href="aboutus.html" class="nav-link hover:text-blue-400">About Us</a>
                    <a href="contactus.html" class="text-blue-400 hover:underline">Contact Us</a>
                </div>
            </div>

            <!-- Mobile Menu (hidden by default) -->
            <div id="mobile-menu" class="hidden md:hidden mt-4">
                <div class="flex flex-col space-y-3">
                    <a href="aiassistant.html" class="nav-link hover:text-blue-400">AI Tutor</a>
                    
                    <!-- Mobile Past Papers dropdown -->
                    <div class="mobile-dropdown">
                        <button id="mobile-papers-dropdown" class="flex justify-between items-center w-full nav-link hover:text-blue-400">
                            Past Papers
                            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div id="mobile-papers-menu" class="hidden pl-4 mt-2 space-y-2">
                            <a href="igcse.html" class="block py-1 hover:text-blue-400">IGCSE</a>
                            <a href="comingsoon.html" class="block py-1 hover:text-blue-400">IAL</a>
                            
                        </div>
                    </div>
                    
                    <a href="aboutus.html" class="nav-link hover:text-blue-400">About Us</a>
                    <a href="contactus.html" class="text-blue-400 hover:underline">Contact Us</a>
                </div>
            </div>
            </div>

            <!-- Mobile Menu (hidden by default) -->
            <div id="mobile-menu" class="hidden md:hidden mt-4">
                <div class="flex flex-col space-y-3">
                    <a href="aiassistant.html" class="nav-link hover:text-blue-400">AI Tutor</a>
                    
                    <!-- Mobile Past Papers dropdown -->
                    <div class="mobile-dropdown">
                        <button id="mobile-papers-dropdown" class="flex justify-between items-center w-full nav-link hover:text-blue-400">
                            Past Papers
                            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div id="mobile-papers-menu" class="hidden pl-4 mt-2 space-y-2">
                            <a href="igcse.html" class="block py-1 hover:text-blue-400">IGCSE</a>
                            <a href="comingsoon.html" class="block py-1 hover:text-blue-400">IAL</a>
                            
                        </div>
                    </div>
                    
                    <a href="aboutus.html" class="nav-link hover:text-blue-400">About Us</a>
                    <a href="contactus.html" class="text-blue-400 hover:underline">Contact Us</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-24 container mx-auto px-6 pb-12">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold mb-3 bg-gradient-to-r from-gray-300 to-gray-100 bg-clip-text text-transparent">AI Study Assistant</h1>
            <p class="text-xl text-gray-400">Your personal tutor powered by advanced AI</p>
        </div>

        <!-- Chat Interface - Dark Theme Redesign with Gray/Black Focus -->
        <div class="max-w-4xl mx-auto">
            <!-- Chat Messages Container -->
            <div id="chat-messages" class="bg-black bg-opacity-30 backdrop-filter backdrop-blur-md rounded-xl p-6 h-[500px] overflow-y-auto mb-6 border border-gray-800 border-opacity-50 shadow-xl">
                <!-- Welcome Message -->
                <div class="flex items-start mb-6">
                    <div class="flex-shrink-0">
                        <div class="h-10 w-10 rounded-full bg-gradient-to-r from-gray-700 to-gray-900 flex items-center justify-center">
                            <img src="./images/logo.png" alt="AI" class="h-6 w-6">
                        </div>
                    </div>
                    <div class="ml-4 bg-gradient-to-r from-gray-900 to-black rounded-2xl p-4 shadow-md border border-gray-700 border-opacity-30 max-w-3xl">
                        <p class="text-gray-200 text-lg font-medium">Hello! I'm your AI Study Assistant. I can help you with:</p>
                        <ul class="list-disc list-inside mt-3 text-gray-300 space-y-2">
                            <li>Understanding difficult subject concepts</li>
                            <li>Explaining complex solutions and methods</li>
                            <li>Breaking down problems step-by-step</li>
                            <li>Providing study tips and exam preparation</li>
                        </ul>
                        <p class="mt-3 text-gray-400 italic">Ask me anything about your coursework!</p>
                    </div>
                </div>
            </div>

            <!-- Input Area - Dark Theme Redesign with Gray/Black Focus -->
            <div class="flex space-x-3">
                <div class="flex-1 relative">
                    <input type="text" id="user-input" 
                        class="w-full bg-black bg-opacity-30 backdrop-filter backdrop-blur-md rounded-xl px-5 py-4 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-600 border border-gray-800 border-opacity-50 shadow-md"
                        placeholder="Type your question here...">
                    <button id="voice-button" 
                        class="absolute right-3 top-1/2 transform -translate-y-1/2 bg-gray-700 hover:bg-gray-600 text-white p-2 rounded-lg transition-all hover:scale-105">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" />
                        </svg>
                    </button>
                </div>
                <button id="send-button" 
                    class="bg-gradient-to-r from-gray-800 to-gray-900 hover:from-gray-700 hover:to-gray-800 text-white px-8 py-4 rounded-xl transition-all hover:scale-105 font-medium shadow-md flex items-center space-x-2">
                    <span>Send</span>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                    </svg>
                </button>
            </div>
        </div>
    </main>

    <!-- Update the JavaScript for messages and loading indicator -->
    <script>
        // Mobile menu functionality
        document.getElementById('mobile-menu-button').addEventListener('click', () => {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });

        // Chat functionality
        const chatMessages = document.getElementById('chat-messages');
        const userInput = document.getElementById('user-input');
        const sendButton = document.getElementById('send-button');

        async function sendMessage() {
            const message = userInput.value.trim();
            if (!message) return;

            addMessageToChat('user', message);
            userInput.value = '';

            try {
                // Loading animation
                const loadingDiv = document.createElement('div');
                loadingDiv.className = 'flex items-start mb-6';
                loadingDiv.innerHTML = `
                    <div class="flex-shrink-0">
                        <div class="h-10 w-10 rounded-full bg-gradient-to-r from-blue-600 to-blue-800 flex items-center justify-center">
                            <img src="./images/logo.png" alt="AI" class="h-6 w-6">
                        </div>
                    </div>
                    <div class="ml-4 bg-gray-900 bg-opacity-40 rounded-2xl p-4 border border-blue-900 border-opacity-50 shadow-md">
                        <div class="typing">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                `;
                chatMessages.appendChild(loadingDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;

                const response = await fetch('https://api.mistral.ai/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer vVeJjD7bVb2wERExjpThH6lIdddMYA7d'
                    },
                    body: JSON.stringify({
                        model: "mistral-tiny",
                        messages: [{
                            role: "system",
                            content: "You are a helpful study assistant. Try to be as simple and short as possible"
                        }, {
                            role: "user",
                            content: message
                        }],
                        max_tokens: 1000
                    })
                });

                const data = await response.json();
                chatMessages.removeChild(loadingDiv);
                addMessageToChat('assistant', data.choices[0].message.content);
            } catch (error) {
                console.error('Error:', error);
                chatMessages.removeChild(chatMessages.lastChild);
                addMessageToChat('assistant', 'Sorry, I encountered an error. Please try again.');
            }
        }

        // Update the addMessageToChat function for dark theme
        function addMessageToChat(role, content) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'flex items-start mb-6';
        
            const isUser = role === 'user';
            
            if (isUser) {
                messageDiv.innerHTML = `
                    <div class="ml-auto bg-gradient-to-r from-blue-700 to-blue-900 rounded-2xl p-4 shadow-md max-w-xl">
                        <p class="text-blue-100">${content}</p>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="flex-shrink-0">
                        <div class="h-10 w-10 rounded-full bg-gradient-to-r from-blue-600 to-blue-800 flex items-center justify-center">
                            <img src="./images/logo.png" alt="AI" class="h-6 w-6">
                        </div>
                    </div>
                    <div class="ml-4 bg-gray-900 bg-opacity-40 backdrop-filter backdrop-blur-sm rounded-2xl p-4 shadow-md border border-blue-900 border-opacity-30 max-w-3xl">
                        <p class="text-blue-100">${content}</p>
                    </div>
                `;
            }
        
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Event listeners remain the same
        sendButton.addEventListener('click', sendMessage);
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });

        // Voice recognition functionality
        if ('webkitSpeechRecognition' in window) {
            const recognition = new webkitSpeechRecognition();
            const voiceButton = document.getElementById('voice-button');
            
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.lang = 'en-US';

            voiceButton.addEventListener('click', () => {
                recognition.start();
                voiceButton.classList.add('bg-red-600');
            });

            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                userInput.value = transcript;
                voiceButton.classList.remove('bg-red-600');
            };

            recognition.onend = () => {
                voiceButton.classList.remove('bg-red-600');
            };

            recognition.onerror = () => {
                voiceButton.classList.remove('bg-red-600');
            };
        }
    </script>
<!-- Vercel Analytics -->
<script>
  window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
</script>
<script defer src="/_vercel/insights/script.js"></script>
<!-- Vercel Speed Insights -->
<script>
  window.si = window.si || function () { (window.siq = window.siq || []).push(arguments); };
</script>
<script defer src="/_vercel/speed-insights/script.js"></script>
</body>
</html>